<html>
    <head>
        <title>Capture Photo</title>
        
        <script type="text/javascript" charset="utf-8" src="cordova-2.5.0.js"></script>
        <script src="js/FaceDetect.js" type="text/javascript"></script>
        <script type="text/javascript" charset="utf-8">
            
            
            
<!--            function createNewToDo()-->
<!--            {-->
<!--                var todoDictionary = {};-->
<!--                -->
<!--                // prompt the user to enter to-do-->
<!--                var todo = prompt("To-Do","");-->
<!--                if (todo != null)-->
<!--                {-->
<!--                    if (todo == "")-->
<!--                    {-->
<!--                        alert("To-Do can't be empty!");-->
<!--                    }-->
<!--                    else-->
<!--                    {-->
<!--                        // append the new to-do with the table-->
<!--                        todoDictionary = { check : 0 , text : todo};-->
<!--                        addTableRow(todoDictionary, false);-->
<!--                    }-->
<!--                }-->
<!--                -->
<!--            }-->
<!--        // add a row to the table-->
<!--        -->
<!--        var rowID = 0;-->
<!--        function addTableRow(todoDictionary, appIsLoading)-->
<!--        {-->
<!--            rowID +=1;-->
<!--            var table = document.getElementById("dataTable");-->
<!--            var rowCount = table.rows.length;-->
<!--            var row = table.insertRow(rowCount);-->
<!--            -->
<!--            // create the checkbox-->
<!--            var cell1 = row.insertCell(0);-->
<!--            var element1 = document.createElement("input");-->
<!--            element1.type = "checkbox";-->
<!--            element1.name = "chkbox[]";-->
<!--            element1.checked = todoDictionary["check"];-->
<!--            element1.className = "checkbox";-->
<!--            element1.setAttribute("onclick", "checkboxClicked()");-->
<!--            cell1.appendChild(element1);-->
<!--            -->
<!--            // create the textbox-->
<!--            var cell2 = row.insertCell(1);-->
<!--            var element2 = document.createElement("input");-->
<!--            element2.type = "text";-->
<!--            element2.name = "txtbox[]";-->
<!--            element2.size = 16;-->
<!--            element2.id = "text" + rowID;-->
<!--            element2.value = todoDictionary["text"];-->
<!--            element2.setAttribute("onchange", "saveToDoList()");-->
<!--            element2.className = "textbox";-->
<!--            cell2.appendChild(element2);-->
<!--            -->
<!--            // create the view button-->
<!--            var cell3 = row.insertCell(2);-->
<!--            var element3 = document.createElement("input");-->
<!--            element3.type = "button";-->
<!--            element3.id = rowID;-->
<!--            element3.value = "View";-->
<!--            element3.setAttribute("onclick", "viewSelectedRow(document.getElementById('text' + this.id))");-->
<!--            element3.className = "viewButton";-->
<!--            cell3.appendChild(element3);-->
<!--            -->
<!--            // create the delete button-->
<!--            var cell4 = row.insertCell(3);-->
<!--            var element4 = document.createElement("input");-->
<!--            element4.type = "button";-->
<!--            element4.value = "Delete";-->
<!--            element4.setAttribute("onclick", "deleteSelectedRow(this)");-->
<!--            element4.className = "deleteButton";-->
<!--            cell4.appendChild(element4);-->
<!--            -->
<!--            // update the UI and save the to-do list-->
<!--            checkboxClicked();-->
<!--            saveToDoList();-->
<!--            -->
<!--            if (!appIsLoading) alert("Task Added Successfully.");-->
<!--        }-->
<!--        -->
<!--        // add the strike-through styling to completed tasks-->
<!--        function checkboxClicked()-->
<!--        {-->
<!--            var table = document.getElementById("dataTable");-->
<!--            var rowCount = table.rows.length;-->
<!--            -->
<!--            // loop through all rows of the table-->
<!--            for(var i = 0; i < rowCount; i++)-->
<!--            {-->
<!--                var row = table.rows[i];-->
<!--                var chkbox = row.cells[0].childNodes[0];-->
<!--                var textbox = row.cells[1].childNodes[0];-->
<!--                -->
<!--                // if the checkbox is checked, add the strike-through styling-->
<!--                if(null != chkbox && true == chkbox.checked)-->
<!--                {-->
<!--                    if(null != textbox)-->
<!--                    {-->
<!--                        textbox.style.setProperty("text-decoration", "line-through");-->
<!--                    }-->
<!--                }-->
<!--                -->
<!--                // if the checkbox isn't checked, remove the strike-through styling-->
<!--                else-->
<!--                {-->
<!--                    textbox.style.setProperty("text-decoration", "none");-->
<!--                }-->
<!--                -->
<!--            }-->
<!--            -->
<!--            // save the to-do list-->
<!--            saveToDoList();-->
<!--        }-->
<!--        -->
<!--        // view the content of the selected row-->
<!--        function viewSelectedRow(todoTextField)-->
<!--        {-->
<!--            alert(todoTextField.value);-->
<!--        }-->
<!--        -->
<!--        // delete the selected row-->
<!--        function deleteSelectedRow(deleteButton)-->
<!--        {-->
<!--            var p = deleteButton.parentNode.parentNode;-->
<!--            p.parentNode.removeChild(p);-->
<!--            saveToDoList();-->
<!--        }-->
<!--        -->
<!--        // delete the selected row-->
<!--        function deleteSelectedRow(deleteButton)-->
<!--        {-->
<!--            var p = deleteButton.parentNode.parentNode;-->
<!--            p.parentNode.removeChild(p);-->
<!--            saveToDoList();-->
<!--        }-->
<!--        // remove completed tasks-->
<!--        function removeCompletedTasks()-->
<!--        {-->
<!--            var table = document.getElementById("dataTable");-->
<!--            var rowCount = table.rows.length;-->
<!--            -->
<!--            // loop through all rows of the table-->
<!--            for(var i = 0; i < rowCount; i++)-->
<!--            {-->
<!--                // if the checkbox is checked, delete the row-->
<!--                var row = table.rows[i];-->
<!--                var chkbox = row.cells[0].childNodes[0];-->
<!--                if(null != chkbox && true == chkbox.checked)-->
<!--                {-->
<!--                    table.deleteRow(i);-->
<!--                    rowCount--;-->
<!--                    i--;-->
<!--                }-->
<!--            }-->
<!--            -->
<!--            // save the to-do list-->
<!--            saveToDoList();-->
<!--            -->
<!--            alert("Completed Tasks Were Removed Successfully.");-->
<!--        }-->
<!--        -->
<!--        // save the to-do list-->
<!--        function saveToDoList()-->
<!--        {-->
<!--            var todoArray = {};-->
<!--            var checkBoxState = 0;-->
<!--            var textValue = "";-->
<!--            -->
<!--            var table = document.getElementById("dataTable");-->
<!--            var rowCount = table.rows.length;-->
<!--            -->
<!--            if (rowCount != 0)-->
<!--            {-->
<!--                // loop through all rows of the table-->
<!--                for(var i=0; i<rowCount; i++)-->
<!--                {-->
<!--                    var row = table.rows[i];-->
<!--                    -->
<!--                    // determine the state of the checkbox-->
<!--                    var chkbox = row.cells[0].childNodes[0];-->
<!--                    if(null != chkbox && true == chkbox.checked)-->
<!--                    {-->
<!--                        checkBoxState = 1;-->
<!--                    }-->
<!--                    else-->
<!--                    {-->
<!--                        checkBoxState= 0;-->
<!--                    }-->
<!--                    -->
<!--                    // retrieve the content of the to-do-->
<!--                    var textbox = row.cells[1].childNodes[0];-->
<!--                    textValue = textbox.value;-->
<!--                    -->
<!--                    // populate the array-->
<!--                    todoArray["row" + i] =-->
<!--                    {-->
<!--                        check : checkBoxState,-->
<!--                        text : textValue-->
<!--                    };-->
<!--                }-->
<!--            }-->
<!--            else-->
<!--            {-->
<!--                todoArray = null;-->
<!--            }-->
<!--            -->
<!--            // use the local storage API to persist the data as JSON-->
<!--            window.localStorage.setItem("todoList", JSON.stringify(todoArray));-->
<!--        }-->
<!--        -->
<!--        // load the to-do list-->
<!--        function loadToDoList()-->
<!--        {-->
<!--            // use the local storage API load the JSON formatted to-do list, and decode it-->
<!--            var theList = JSON.parse(window.localStorage.getItem("todoList"));-->
<!--            -->
<!--            if (null == theList || theList == "null")-->
<!--            {-->
<!--                deleteAllRows();-->
<!--            }-->
<!--            else-->
<!--            {-->
<!--                var count = 0;-->
<!--                for (var obj in theList)-->
<!--                {-->
<!--                    count++;-->
<!--                }-->
<!--                -->
<!--                // remove any existing rows from the table-->
<!--                deleteAllRows();-->
<!--                -->
<!--                // loop through the to-dos-->
<!--                for(var i = 0; i < count; i++)-->
<!--                {-->
<!--                    // adding a row to the table for each one-->
<!--                    addTableRow(theList["row" + i], true);-->
<!--                }-->
<!--            }-->
<!--        }-->
<!--        -->
<!--        // delete all the rows-->
<!--        function deleteAllRows()-->
<!--        {-->
<!--            var table = document.getElementById("dataTable");-->
<!--            var rowCount = table.rows.length;-->
<!--            -->
<!--            // loop through all rows of the table-->
<!--            for(var i = 0; i < rowCount; i++)-->
<!--            {-->
<!--                // delete the row-->
<!--                table.deleteRow(i);-->
<!--                rowCount--;-->
<!--                i--;-->
<!--            }-->
<!--            -->
<!--            // save the to-do list-->
<!--            saveToDoList();-->
<!--        }-->

            
            
            
            
            
            var pictureSource; // picture source
            var destinationType; // sets the format of returned value
            
            // Wait for Cordova to connect with the device
            //
            document.addEventListener("deviceready",onDeviceReady,false);
            
            // Cordova is ready to be used!
            //
            function onDeviceReady() {
                pictureSource=navigator.camera.PictureSourceType;
                destinationType=navigator.camera.DestinationType;
            }
            
            
            // Called when a photo is successfully retrieved
            //
            function onPhotoURISuccess(imageURI) {
                
                window.FaceDetect({url_imagen: imageURI},nativePluginResultHandler,nativePluginErrorHandler);
            }
            
            // A button will call this function
            //
            function capturePhoto() {
                // Take picture using device camera and retrieve image as file uri string
                navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 50,
                                            destinationType: destinationType.FILE_URI });
            }
            
            // A button will call this function
            //
            function capturePhotoEdit() {
                // Take picture using device camera, allow edit, and retrieve image as base64-encoded string
                navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 50, allowEdit: true,
                                            destinationType: destinationType.FILE_URI });
            }
            
            
            
            // Called if something bad happens.
            //
            function onFail(message) {
                alert('Failed because: ' + message);
            }
          
            
            function nativePluginResultHandler (result) {
                var resultString = "";
                //alert(result[0].face);
                for (var i=0;i<result.length;i++) {
                    resultString += "face "+(i+1)+": "+result[i].face;
                    resultString += "right eye: "+result[i].right_eye;
                    resultString += "left eye: "+result[i].left_eye;
                    resultString += "mouth: "+result[i].mouth;
                    resultString += "<br/>";
                }
                
                var resultado = document.getElementById("resultado");
   
                resultado.innerHTML = resultString;
            }
            
            function nativePluginErrorHandler (result) {
                
                var resultado = document.getElementById("resultado");
                
                resultado.innerHTML = result;
            }
            

            
            </script>
    </head>
    <body>
        <button onclick="capturePhoto();">Capture Photo</button> <br>
        <button onclick="capturePhotoEdit();">Capture Editable Photo</button> <br>
        <p id='resultado'>hola</p>
        
    </body>
</html>